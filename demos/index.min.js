(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var defaults = {
	$elName: '$el',
	elSep: '__',
	modSep: '--',
	namespace: null
};

if (typeof $ == 'undefined') {
	if (typeof jQuery == 'undefined') {
		throw new Error('ya-del: jQuery is not defined');
	} else $ = jQuery;
}

/**
 * @typedef {String} dName
 *
 * Element document name.
 * This name is used as an identifier for element.
 */

module.exports = {
	/**
	 * Init del module
	 * @param  {Object} options
	 * @param  {String} [options.dName]
	 * @param  {String} [options.namespace] Namespace
	 * @param  {jQuery|DOMElement} [options.$el]
	 */
	initDel: function(options) {
		this.DelOptions = $.extend({}, defaults, this.DelOptions, options);
		this.dName = this.DelOptions.dName || this._name;
		this.selector = this.selector || '.' + this.dName;
		this.namespace = this.DelOptions.namespace || this.dName;
		this.initEl();
	},

	/**
	 * Define $el
	 */
	initEl: function() {
		if (this.$el) return;
		if (this.DelOptions.$el) {
			if (this.DelOptions.$el instanceof $)
				this.$el = this.DelOptions.$el;
			else this.$el = $(this.DelOptions.$el);
		} else this.$el = $('.' + this.dName);
	},

	makeName: function(elName, modName) {
		var name = this.dName;
		if (elName) {
			if (!Array.isArray(elName)) elName = [elName];
			name += this.DelOptions.elSep + elName.join(this.DelOptions.elSep);
		}
		if (modName) name += this.DelOptions.modSep + modName;
		return name;
	},

	/**
	 * Add property $dName to el classes
	 */
	setName: function() {
		this.$el.addClass(this.dName);
	},

	makeSelector: function() {
		return '.' + this.makeName.apply(this, arguments);
	},

	/**
	 * Find child element by a dName
	 * @param {String} dName dName
	 * @return {jQuery} Finded element
	 */
	find: function() {
		return this.$el.find(this.makeSelector.apply(this, arguments));
	},

	/**
	 * Find element in other el
	 * @param {jQuery|string|DOMElement} el el to find in
	 * @param {string|array} element name
	 * @return {jQuery}
	 */
	findIn: function(el) {
		return (el instanceof $ ? el : $(el)).find(this.makeSelector.apply(this, [].slice.call(arguments, 1)));
	},

	/**
	 * Make full el name by modifier
	 * @param  {string} name       modifier name
	 * @param  {bool} toSelector   to prepend selector mark on not
	 * @return {string}            full el name/selector
	 */
	modName: function(name, toSelector) {
		var selectorMark = toSelector ? '.' : '';
		return selectorMark + this.makeName('', name);
	},

	hasMod: function(name) {
		return this.$el.hasClass(this.modName(name));
	},

	addMod: function(name) {
		return this.$el.addClass(this.modName(name));
	},

	filterByMod: function(name) {
		return this.$el.filter('.' + this.modName(name));
	},

	removeMod: function(name) {
		this.$el.removeClass(this.modName(name));
	},

	toggleMod: function(name, state) {
		var args = arguments;
		args[0] = this.modName(args[0]);
		$.fn.toggleClass.apply(this.$el, args);
	},

	eventName: function(name) {
		return name + '.' + this.namespace;
	},

	/**
	 * jquery like 'on'. Attach event to this.$el or with delegation.
	 * 
	 * @example
	 * obj.on('click', 'elName', handler)
	 * obj.on('click', handler)
	 * 
	 * @param  {[type]} name [description]
	 * @return {[type]}      [description]
	 */
	on: function(name) {
		var args = arguments;
		args[0] = this.eventName(name);
		$.fn.on.apply(this.$el, args);
	},

	/**
	 * Opposite to #on
	 */
	off: function(name) {
		this.$el.off(this.eventName(name));
	},
	trigger: function(name) {
		this.$el.trigger(this.eventName(name));
	},

	createEl: function(name, tagName) {
		return $('<' + (tagName || 'div') + ' />', {
			'class': this.makeName(name)
		});
	}
};
},{}],2:[function(require,module,exports){
'use strict';
var Del = require('ya-del');
require('./tabbable-selector');

function App () {
	this.$savedFocus = undefined;

	this.lastFocused = undefined;
}

App._name = 'yapopup';
App.defaults = {
	// If append to body
	bodyAppend: true,

	// Close button html
	close: '<button>x</button>',

	dName: 'b-popup'
};

App.KEY_CODES = {
	ESC: 27,
	TAB: 9,
	SHIFT: 65
};

App.make = function(options) {
	var inst = new this;
	inst.options = options;
	return inst;
};

App.init = function(options) {
	var inst = this.make(options);
	if (inst) inst.init();
	return inst;
};

App.prototype = $.extend({}, Del, {
	constructor: App,
	init: function() {
		this.setOptions();
		this.setEl();
		this.name = this.constructor._name;
		this.defineId();
		this.initDel({dName: this.options.dName});
		this.defineEls();
		this.defineEvents();
		this.setAria();
	},

	setOptions: function() {
		this.options = $.extend(true, {}, this.constructor.defaults, this.options);
	},

	setEl: function() {
		if (!this.options.$el || this.options.$el.length !== 1)
			throw new Error('$el options must be defined and exist in DOM');
		this.$el = this.options.$el;
	},

	defineId: function() {
		this.id = this.$el.attr('id');
		if (!this.id) throw new Error('There is no id in popup el');
	},

	defineEls: function() {
		this.$content = this.find('content');
		this.defineTrigger();
		this.defineClose();
	},

	defineTrigger: function() {
		this.$trigger = $('[data-yapopup-target=' + this.id + ']');
	},

	defineClose: function() {
		this.$close = this.find('close');
		if (!this.$close.length) {
			this.$close = $(this.options.close)
				.addClass(this.makeName('close'))
				.appendTo(this.$content);
		}
	},

	defineEvents: function() {
		var self = this;
		this.$trigger.on('click.' + this.name, function(e) {
			e.preventDefault();
			self.open();
		});
		this.$close.on('click', function(e) {
			e.preventDefault();
			self.close();
		});
		$(document).on('focusin', function(e) {
			self.onDocumenFocus(e);
		}).on('keyup.' + this.name, function(e) {
			self.checkEsc(e);
		});;
	},

	setAria: function() {
		this.$el.attr('role', 'dialog');
		// Just to determine that focus is out of a popup
		this.$el.attr('tabindex', 0);
	},

	open: function() {
		this.saveFocus();
		this.show();
		this.ariaShow();
		this.focusIn();
	},

	close: function() {
		this.hide();
		this.restorefocus();
		this.ariaHide();
	},

	ariaShow: function() {
		this.$el.attr('aria-hidden', false);
	},

	ariaHide: function() {
		this.$el.attr('aria-hidden', true);
	},

	show: function() {
		this.addMod('show');
	},

	hide: function() {
		this.removeMod('show');
	},

	focusIn: function() {
		this.$el.find(':tabbable').first().focus();
	},

	saveFocus: function() {
		this.$savedFocus = $(':focus');
	},

	restorefocus: function() {
		this.$savedFocus.focus();
	},

	checkEsc: function(e) {
		if (e.keyCode == this.constructor.KEY_CODES.ESC)
			this.close();
	},

	onDocumenFocus: function(e) {
		if ($.contains(this.$el[0], e.target)) this.lastFocused = e.target;
		else {
			this.setFocusIn();
		}
	},

	/**
	 * Back focus in a popup
	 */
	setFocusIn: function() {
		var $tabbable = this.$el.find(':tabbable');
		var $lastTabbable = $tabbable.last();
		if (this.lastFocused === $lastTabbable[0]) {
			$tabbable.first().focus();
		} else $lastTabbable.focus();
	},
});

module.exports = App;
},{"./tabbable-selector":4,"ya-del":1}],3:[function(require,module,exports){
var Yapopup = require('./app');

(function($) {
	if ($.Yapopup || $.fn.yapopup) {
		console.warn('Yapopup or another plugin with similar name has been already setted');
	}
	$.Yapopup = Yapopup;
	$.fn.yapopup = function(options) {
		return this.each(function(index) {
			options = $.extend({}, options);
			options.index = index;
			options.$el = $(this);
			$.Yapopup.init(options);
		});
	};
})(jQuery);

window.l = function(x) {
	console.log(x);
};
},{"./app":2}],4:[function(require,module,exports){
$.extend($.expr[ ':' ], {
	focusable: function(element){
		return focusable(element, !isNaN($.attr(element, 'tabindex')));
	},

	tabbable: function(element){
		var tabIndex = $.attr(element, 'tabindex'),
			isTabIndexNaN = isNaN(tabIndex);
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable(element, !isTabIndexNaN);
	}
});

/**
 * focussable function, taken from jQuery UI Core
 * @param element
 * @returns {*}
 */
function focusable(element){
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase(),
		isTabIndexNotNaN = !isNaN($.attr(element, 'tabindex'));
	if('area' === nodeName){
		map = element.parentNode;
		mapName = map.name;
		if(!element.href || !mapName || map.nodeName.toLowerCase() !== 'map'){
			return false;
		}
		img = $('img[usemap=#' + mapName + ']')[0];
		return !!img && visible(img);
	}
	return ( /^(input|select|textarea|button|object)$/.test(nodeName) ?
		!element.disabled :
		'a' === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible(element);

	function visible(element){
		var $el = $(element);
		var $elAndParents = $el.parents().add($el);
		return $.expr.filters.visible(element) && !$elAndParents.filter(function(){
			return $.css(this, 'visibility') === 'hidden';
		}).length;
	}
}
},{}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMveWEtZGVsL2RlbC5qcyIsInNyYy9qcy9hcHAuanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvdGFiYmFibGUtc2VsZWN0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBkZWZhdWx0cyA9IHtcclxuXHQkZWxOYW1lOiAnJGVsJyxcclxuXHRlbFNlcDogJ19fJyxcclxuXHRtb2RTZXA6ICctLScsXHJcblx0bmFtZXNwYWNlOiBudWxsXHJcbn07XHJcblxyXG5pZiAodHlwZW9mICQgPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRpZiAodHlwZW9mIGpRdWVyeSA9PSAndW5kZWZpbmVkJykge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKCd5YS1kZWw6IGpRdWVyeSBpcyBub3QgZGVmaW5lZCcpO1xyXG5cdH0gZWxzZSAkID0galF1ZXJ5O1xyXG59XHJcblxyXG4vKipcclxuICogQHR5cGVkZWYge1N0cmluZ30gZE5hbWVcclxuICpcclxuICogRWxlbWVudCBkb2N1bWVudCBuYW1lLlxyXG4gKiBUaGlzIG5hbWUgaXMgdXNlZCBhcyBhbiBpZGVudGlmaWVyIGZvciBlbGVtZW50LlxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdC8qKlxyXG5cdCAqIEluaXQgZGVsIG1vZHVsZVxyXG5cdCAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9uc1xyXG5cdCAqIEBwYXJhbSAge1N0cmluZ30gW29wdGlvbnMuZE5hbWVdXHJcblx0ICogQHBhcmFtICB7U3RyaW5nfSBbb3B0aW9ucy5uYW1lc3BhY2VdIE5hbWVzcGFjZVxyXG5cdCAqIEBwYXJhbSAge2pRdWVyeXxET01FbGVtZW50fSBbb3B0aW9ucy4kZWxdXHJcblx0ICovXHJcblx0aW5pdERlbDogZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cdFx0dGhpcy5EZWxPcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCB0aGlzLkRlbE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cdFx0dGhpcy5kTmFtZSA9IHRoaXMuRGVsT3B0aW9ucy5kTmFtZSB8fCB0aGlzLl9uYW1lO1xyXG5cdFx0dGhpcy5zZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IgfHwgJy4nICsgdGhpcy5kTmFtZTtcclxuXHRcdHRoaXMubmFtZXNwYWNlID0gdGhpcy5EZWxPcHRpb25zLm5hbWVzcGFjZSB8fCB0aGlzLmROYW1lO1xyXG5cdFx0dGhpcy5pbml0RWwoKTtcclxuXHR9LFxyXG5cclxuXHQvKipcclxuXHQgKiBEZWZpbmUgJGVsXHJcblx0ICovXHJcblx0aW5pdEVsOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh0aGlzLiRlbCkgcmV0dXJuO1xyXG5cdFx0aWYgKHRoaXMuRGVsT3B0aW9ucy4kZWwpIHtcclxuXHRcdFx0aWYgKHRoaXMuRGVsT3B0aW9ucy4kZWwgaW5zdGFuY2VvZiAkKVxyXG5cdFx0XHRcdHRoaXMuJGVsID0gdGhpcy5EZWxPcHRpb25zLiRlbDtcclxuXHRcdFx0ZWxzZSB0aGlzLiRlbCA9ICQodGhpcy5EZWxPcHRpb25zLiRlbCk7XHJcblx0XHR9IGVsc2UgdGhpcy4kZWwgPSAkKCcuJyArIHRoaXMuZE5hbWUpO1xyXG5cdH0sXHJcblxyXG5cdG1ha2VOYW1lOiBmdW5jdGlvbihlbE5hbWUsIG1vZE5hbWUpIHtcclxuXHRcdHZhciBuYW1lID0gdGhpcy5kTmFtZTtcclxuXHRcdGlmIChlbE5hbWUpIHtcclxuXHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KGVsTmFtZSkpIGVsTmFtZSA9IFtlbE5hbWVdO1xyXG5cdFx0XHRuYW1lICs9IHRoaXMuRGVsT3B0aW9ucy5lbFNlcCArIGVsTmFtZS5qb2luKHRoaXMuRGVsT3B0aW9ucy5lbFNlcCk7XHJcblx0XHR9XHJcblx0XHRpZiAobW9kTmFtZSkgbmFtZSArPSB0aGlzLkRlbE9wdGlvbnMubW9kU2VwICsgbW9kTmFtZTtcclxuXHRcdHJldHVybiBuYW1lO1xyXG5cdH0sXHJcblxyXG5cdC8qKlxyXG5cdCAqIEFkZCBwcm9wZXJ0eSAkZE5hbWUgdG8gZWwgY2xhc3Nlc1xyXG5cdCAqL1xyXG5cdHNldE5hbWU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kZWwuYWRkQ2xhc3ModGhpcy5kTmFtZSk7XHJcblx0fSxcclxuXHJcblx0bWFrZVNlbGVjdG9yOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAnLicgKyB0aGlzLm1ha2VOYW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0fSxcclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBjaGlsZCBlbGVtZW50IGJ5IGEgZE5hbWVcclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZE5hbWUgZE5hbWVcclxuXHQgKiBAcmV0dXJuIHtqUXVlcnl9IEZpbmRlZCBlbGVtZW50XHJcblx0ICovXHJcblx0ZmluZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy4kZWwuZmluZCh0aGlzLm1ha2VTZWxlY3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcclxuXHR9LFxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIGVsZW1lbnQgaW4gb3RoZXIgZWxcclxuXHQgKiBAcGFyYW0ge2pRdWVyeXxzdHJpbmd8RE9NRWxlbWVudH0gZWwgZWwgdG8gZmluZCBpblxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfGFycmF5fSBlbGVtZW50IG5hbWVcclxuXHQgKiBAcmV0dXJuIHtqUXVlcnl9XHJcblx0ICovXHJcblx0ZmluZEluOiBmdW5jdGlvbihlbCkge1xyXG5cdFx0cmV0dXJuIChlbCBpbnN0YW5jZW9mICQgPyBlbCA6ICQoZWwpKS5maW5kKHRoaXMubWFrZVNlbGVjdG9yLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSkpO1xyXG5cdH0sXHJcblxyXG5cdC8qKlxyXG5cdCAqIE1ha2UgZnVsbCBlbCBuYW1lIGJ5IG1vZGlmaWVyXHJcblx0ICogQHBhcmFtICB7c3RyaW5nfSBuYW1lICAgICAgIG1vZGlmaWVyIG5hbWVcclxuXHQgKiBAcGFyYW0gIHtib29sfSB0b1NlbGVjdG9yICAgdG8gcHJlcGVuZCBzZWxlY3RvciBtYXJrIG9uIG5vdFxyXG5cdCAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICBmdWxsIGVsIG5hbWUvc2VsZWN0b3JcclxuXHQgKi9cclxuXHRtb2ROYW1lOiBmdW5jdGlvbihuYW1lLCB0b1NlbGVjdG9yKSB7XHJcblx0XHR2YXIgc2VsZWN0b3JNYXJrID0gdG9TZWxlY3RvciA/ICcuJyA6ICcnO1xyXG5cdFx0cmV0dXJuIHNlbGVjdG9yTWFyayArIHRoaXMubWFrZU5hbWUoJycsIG5hbWUpO1xyXG5cdH0sXHJcblxyXG5cdGhhc01vZDogZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0cmV0dXJuIHRoaXMuJGVsLmhhc0NsYXNzKHRoaXMubW9kTmFtZShuYW1lKSk7XHJcblx0fSxcclxuXHJcblx0YWRkTW9kOiBmdW5jdGlvbihuYW1lKSB7XHJcblx0XHRyZXR1cm4gdGhpcy4kZWwuYWRkQ2xhc3ModGhpcy5tb2ROYW1lKG5hbWUpKTtcclxuXHR9LFxyXG5cclxuXHRmaWx0ZXJCeU1vZDogZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0cmV0dXJuIHRoaXMuJGVsLmZpbHRlcignLicgKyB0aGlzLm1vZE5hbWUobmFtZSkpO1xyXG5cdH0sXHJcblxyXG5cdHJlbW92ZU1vZDogZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0dGhpcy4kZWwucmVtb3ZlQ2xhc3ModGhpcy5tb2ROYW1lKG5hbWUpKTtcclxuXHR9LFxyXG5cclxuXHR0b2dnbGVNb2Q6IGZ1bmN0aW9uKG5hbWUsIHN0YXRlKSB7XHJcblx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuXHRcdGFyZ3NbMF0gPSB0aGlzLm1vZE5hbWUoYXJnc1swXSk7XHJcblx0XHQkLmZuLnRvZ2dsZUNsYXNzLmFwcGx5KHRoaXMuJGVsLCBhcmdzKTtcclxuXHR9LFxyXG5cclxuXHRldmVudE5hbWU6IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHRcdHJldHVybiBuYW1lICsgJy4nICsgdGhpcy5uYW1lc3BhY2U7XHJcblx0fSxcclxuXHJcblx0LyoqXHJcblx0ICoganF1ZXJ5IGxpa2UgJ29uJy4gQXR0YWNoIGV2ZW50IHRvIHRoaXMuJGVsIG9yIHdpdGggZGVsZWdhdGlvbi5cclxuXHQgKiBcclxuXHQgKiBAZXhhbXBsZVxyXG5cdCAqIG9iai5vbignY2xpY2snLCAnZWxOYW1lJywgaGFuZGxlcilcclxuXHQgKiBvYmoub24oJ2NsaWNrJywgaGFuZGxlcilcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gIHtbdHlwZV19IG5hbWUgW2Rlc2NyaXB0aW9uXVxyXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gICAgICBbZGVzY3JpcHRpb25dXHJcblx0ICovXHJcblx0b246IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG5cdFx0YXJnc1swXSA9IHRoaXMuZXZlbnROYW1lKG5hbWUpO1xyXG5cdFx0JC5mbi5vbi5hcHBseSh0aGlzLiRlbCwgYXJncyk7XHJcblx0fSxcclxuXHJcblx0LyoqXHJcblx0ICogT3Bwb3NpdGUgdG8gI29uXHJcblx0ICovXHJcblx0b2ZmOiBmdW5jdGlvbihuYW1lKSB7XHJcblx0XHR0aGlzLiRlbC5vZmYodGhpcy5ldmVudE5hbWUobmFtZSkpO1xyXG5cdH0sXHJcblx0dHJpZ2dlcjogZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0dGhpcy4kZWwudHJpZ2dlcih0aGlzLmV2ZW50TmFtZShuYW1lKSk7XHJcblx0fSxcclxuXHJcblx0Y3JlYXRlRWw6IGZ1bmN0aW9uKG5hbWUsIHRhZ05hbWUpIHtcclxuXHRcdHJldHVybiAkKCc8JyArICh0YWdOYW1lIHx8ICdkaXYnKSArICcgLz4nLCB7XHJcblx0XHRcdCdjbGFzcyc6IHRoaXMubWFrZU5hbWUobmFtZSlcclxuXHRcdH0pO1xyXG5cdH1cclxufTsiLCIndXNlIHN0cmljdCc7XHJcbnZhciBEZWwgPSByZXF1aXJlKCd5YS1kZWwnKTtcclxucmVxdWlyZSgnLi90YWJiYWJsZS1zZWxlY3RvcicpO1xyXG5cclxuZnVuY3Rpb24gQXBwICgpIHtcclxuXHR0aGlzLiRzYXZlZEZvY3VzID0gdW5kZWZpbmVkO1xyXG5cclxuXHR0aGlzLmxhc3RGb2N1c2VkID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5BcHAuX25hbWUgPSAneWFwb3B1cCc7XHJcbkFwcC5kZWZhdWx0cyA9IHtcclxuXHQvLyBJZiBhcHBlbmQgdG8gYm9keVxyXG5cdGJvZHlBcHBlbmQ6IHRydWUsXHJcblxyXG5cdC8vIENsb3NlIGJ1dHRvbiBodG1sXHJcblx0Y2xvc2U6ICc8YnV0dG9uPng8L2J1dHRvbj4nLFxyXG5cclxuXHRkTmFtZTogJ2ItcG9wdXAnXHJcbn07XHJcblxyXG5BcHAuS0VZX0NPREVTID0ge1xyXG5cdEVTQzogMjcsXHJcblx0VEFCOiA5LFxyXG5cdFNISUZUOiA2NVxyXG59O1xyXG5cclxuQXBwLm1ha2UgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0dmFyIGluc3QgPSBuZXcgdGhpcztcclxuXHRpbnN0Lm9wdGlvbnMgPSBvcHRpb25zO1xyXG5cdHJldHVybiBpbnN0O1xyXG59O1xyXG5cclxuQXBwLmluaXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0dmFyIGluc3QgPSB0aGlzLm1ha2Uob3B0aW9ucyk7XHJcblx0aWYgKGluc3QpIGluc3QuaW5pdCgpO1xyXG5cdHJldHVybiBpbnN0O1xyXG59O1xyXG5cclxuQXBwLnByb3RvdHlwZSA9ICQuZXh0ZW5kKHt9LCBEZWwsIHtcclxuXHRjb25zdHJ1Y3RvcjogQXBwLFxyXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRPcHRpb25zKCk7XHJcblx0XHR0aGlzLnNldEVsKCk7XHJcblx0XHR0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLl9uYW1lO1xyXG5cdFx0dGhpcy5kZWZpbmVJZCgpO1xyXG5cdFx0dGhpcy5pbml0RGVsKHtkTmFtZTogdGhpcy5vcHRpb25zLmROYW1lfSk7XHJcblx0XHR0aGlzLmRlZmluZUVscygpO1xyXG5cdFx0dGhpcy5kZWZpbmVFdmVudHMoKTtcclxuXHRcdHRoaXMuc2V0QXJpYSgpO1xyXG5cdH0sXHJcblxyXG5cdHNldE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdHMsIHRoaXMub3B0aW9ucyk7XHJcblx0fSxcclxuXHJcblx0c2V0RWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCF0aGlzLm9wdGlvbnMuJGVsIHx8IHRoaXMub3B0aW9ucy4kZWwubGVuZ3RoICE9PSAxKVxyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJyRlbCBvcHRpb25zIG11c3QgYmUgZGVmaW5lZCBhbmQgZXhpc3QgaW4gRE9NJyk7XHJcblx0XHR0aGlzLiRlbCA9IHRoaXMub3B0aW9ucy4kZWw7XHJcblx0fSxcclxuXHJcblx0ZGVmaW5lSWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoJ2lkJyk7XHJcblx0XHRpZiAoIXRoaXMuaWQpIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gaWQgaW4gcG9wdXAgZWwnKTtcclxuXHR9LFxyXG5cclxuXHRkZWZpbmVFbHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kY29udGVudCA9IHRoaXMuZmluZCgnY29udGVudCcpO1xyXG5cdFx0dGhpcy5kZWZpbmVUcmlnZ2VyKCk7XHJcblx0XHR0aGlzLmRlZmluZUNsb3NlKCk7XHJcblx0fSxcclxuXHJcblx0ZGVmaW5lVHJpZ2dlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLiR0cmlnZ2VyID0gJCgnW2RhdGEteWFwb3B1cC10YXJnZXQ9JyArIHRoaXMuaWQgKyAnXScpO1xyXG5cdH0sXHJcblxyXG5cdGRlZmluZUNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuJGNsb3NlID0gdGhpcy5maW5kKCdjbG9zZScpO1xyXG5cdFx0aWYgKCF0aGlzLiRjbG9zZS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy4kY2xvc2UgPSAkKHRoaXMub3B0aW9ucy5jbG9zZSlcclxuXHRcdFx0XHQuYWRkQ2xhc3ModGhpcy5tYWtlTmFtZSgnY2xvc2UnKSlcclxuXHRcdFx0XHQuYXBwZW5kVG8odGhpcy4kY29udGVudCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0ZGVmaW5lRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdHRoaXMuJHRyaWdnZXIub24oJ2NsaWNrLicgKyB0aGlzLm5hbWUsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxmLm9wZW4oKTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy4kY2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cdFx0JChkb2N1bWVudCkub24oJ2ZvY3VzaW4nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdHNlbGYub25Eb2N1bWVuRm9jdXMoZSk7XHJcblx0XHR9KS5vbigna2V5dXAuJyArIHRoaXMubmFtZSwgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRzZWxmLmNoZWNrRXNjKGUpO1xyXG5cdFx0fSk7O1xyXG5cdH0sXHJcblxyXG5cdHNldEFyaWE6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kZWwuYXR0cigncm9sZScsICdkaWFsb2cnKTtcclxuXHRcdC8vIEp1c3QgdG8gZGV0ZXJtaW5lIHRoYXQgZm9jdXMgaXMgb3V0IG9mIGEgcG9wdXBcclxuXHRcdHRoaXMuJGVsLmF0dHIoJ3RhYmluZGV4JywgMCk7XHJcblx0fSxcclxuXHJcblx0b3BlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNhdmVGb2N1cygpO1xyXG5cdFx0dGhpcy5zaG93KCk7XHJcblx0XHR0aGlzLmFyaWFTaG93KCk7XHJcblx0XHR0aGlzLmZvY3VzSW4oKTtcclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmhpZGUoKTtcclxuXHRcdHRoaXMucmVzdG9yZWZvY3VzKCk7XHJcblx0XHR0aGlzLmFyaWFIaWRlKCk7XHJcblx0fSxcclxuXHJcblx0YXJpYVNob3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kZWwuYXR0cignYXJpYS1oaWRkZW4nLCBmYWxzZSk7XHJcblx0fSxcclxuXHJcblx0YXJpYUhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kZWwuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKTtcclxuXHR9LFxyXG5cclxuXHRzaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuYWRkTW9kKCdzaG93Jyk7XHJcblx0fSxcclxuXHJcblx0aGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlbW92ZU1vZCgnc2hvdycpO1xyXG5cdH0sXHJcblxyXG5cdGZvY3VzSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy4kZWwuZmluZCgnOnRhYmJhYmxlJykuZmlyc3QoKS5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdHNhdmVGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLiRzYXZlZEZvY3VzID0gJCgnOmZvY3VzJyk7XHJcblx0fSxcclxuXHJcblx0cmVzdG9yZWZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuJHNhdmVkRm9jdXMuZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRjaGVja0VzYzogZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKGUua2V5Q29kZSA9PSB0aGlzLmNvbnN0cnVjdG9yLktFWV9DT0RFUy5FU0MpXHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHR9LFxyXG5cclxuXHRvbkRvY3VtZW5Gb2N1czogZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKCQuY29udGFpbnModGhpcy4kZWxbMF0sIGUudGFyZ2V0KSkgdGhpcy5sYXN0Rm9jdXNlZCA9IGUudGFyZ2V0O1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuc2V0Rm9jdXNJbigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8qKlxyXG5cdCAqIEJhY2sgZm9jdXMgaW4gYSBwb3B1cFxyXG5cdCAqL1xyXG5cdHNldEZvY3VzSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyICR0YWJiYWJsZSA9IHRoaXMuJGVsLmZpbmQoJzp0YWJiYWJsZScpO1xyXG5cdFx0dmFyICRsYXN0VGFiYmFibGUgPSAkdGFiYmFibGUubGFzdCgpO1xyXG5cdFx0aWYgKHRoaXMubGFzdEZvY3VzZWQgPT09ICRsYXN0VGFiYmFibGVbMF0pIHtcclxuXHRcdFx0JHRhYmJhYmxlLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH0gZWxzZSAkbGFzdFRhYmJhYmxlLmZvY3VzKCk7XHJcblx0fSxcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFwcDsiLCJ2YXIgWWFwb3B1cCA9IHJlcXVpcmUoJy4vYXBwJyk7XHJcblxyXG4oZnVuY3Rpb24oJCkge1xyXG5cdGlmICgkLllhcG9wdXAgfHwgJC5mbi55YXBvcHVwKSB7XHJcblx0XHRjb25zb2xlLndhcm4oJ1lhcG9wdXAgb3IgYW5vdGhlciBwbHVnaW4gd2l0aCBzaW1pbGFyIG5hbWUgaGFzIGJlZW4gYWxyZWFkeSBzZXR0ZWQnKTtcclxuXHR9XHJcblx0JC5ZYXBvcHVwID0gWWFwb3B1cDtcclxuXHQkLmZuLnlhcG9wdXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcblx0XHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XHJcblx0XHRcdG9wdGlvbnMuaW5kZXggPSBpbmRleDtcclxuXHRcdFx0b3B0aW9ucy4kZWwgPSAkKHRoaXMpO1xyXG5cdFx0XHQkLllhcG9wdXAuaW5pdChvcHRpb25zKTtcclxuXHRcdH0pO1xyXG5cdH07XHJcbn0pKGpRdWVyeSk7XHJcblxyXG53aW5kb3cubCA9IGZ1bmN0aW9uKHgpIHtcclxuXHRjb25zb2xlLmxvZyh4KTtcclxufTsiLCIkLmV4dGVuZCgkLmV4cHJbICc6JyBdLCB7XHJcblx0Zm9jdXNhYmxlOiBmdW5jdGlvbihlbGVtZW50KXtcclxuXHRcdHJldHVybiBmb2N1c2FibGUoZWxlbWVudCwgIWlzTmFOKCQuYXR0cihlbGVtZW50LCAndGFiaW5kZXgnKSkpO1xyXG5cdH0sXHJcblxyXG5cdHRhYmJhYmxlOiBmdW5jdGlvbihlbGVtZW50KXtcclxuXHRcdHZhciB0YWJJbmRleCA9ICQuYXR0cihlbGVtZW50LCAndGFiaW5kZXgnKSxcclxuXHRcdFx0aXNUYWJJbmRleE5hTiA9IGlzTmFOKHRhYkluZGV4KTtcclxuXHRcdHJldHVybiAoIGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCApICYmIGZvY3VzYWJsZShlbGVtZW50LCAhaXNUYWJJbmRleE5hTik7XHJcblx0fVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBmb2N1c3NhYmxlIGZ1bmN0aW9uLCB0YWtlbiBmcm9tIGpRdWVyeSBVSSBDb3JlXHJcbiAqIEBwYXJhbSBlbGVtZW50XHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuZnVuY3Rpb24gZm9jdXNhYmxlKGVsZW1lbnQpe1xyXG5cdHZhciBtYXAsIG1hcE5hbWUsIGltZyxcclxuXHRcdG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0aXNUYWJJbmRleE5vdE5hTiA9ICFpc05hTigkLmF0dHIoZWxlbWVudCwgJ3RhYmluZGV4JykpO1xyXG5cdGlmKCdhcmVhJyA9PT0gbm9kZU5hbWUpe1xyXG5cdFx0bWFwID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0bWFwTmFtZSA9IG1hcC5uYW1lO1xyXG5cdFx0aWYoIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ21hcCcpe1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpbWcgPSAkKCdpbWdbdXNlbWFwPSMnICsgbWFwTmFtZSArICddJylbMF07XHJcblx0XHRyZXR1cm4gISFpbWcgJiYgdmlzaWJsZShpbWcpO1xyXG5cdH1cclxuXHRyZXR1cm4gKCAvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkLy50ZXN0KG5vZGVOYW1lKSA/XHJcblx0XHQhZWxlbWVudC5kaXNhYmxlZCA6XHJcblx0XHQnYScgPT09IG5vZGVOYW1lID9cclxuXHRcdFx0ZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOlxyXG5cdFx0XHRpc1RhYkluZGV4Tm90TmFOKSAmJlxyXG5cdFx0Ly8gdGhlIGVsZW1lbnQgYW5kIGFsbCBvZiBpdHMgYW5jZXN0b3JzIG11c3QgYmUgdmlzaWJsZVxyXG5cdFx0dmlzaWJsZShlbGVtZW50KTtcclxuXHJcblx0ZnVuY3Rpb24gdmlzaWJsZShlbGVtZW50KXtcclxuXHRcdHZhciAkZWwgPSAkKGVsZW1lbnQpO1xyXG5cdFx0dmFyICRlbEFuZFBhcmVudHMgPSAkZWwucGFyZW50cygpLmFkZCgkZWwpO1xyXG5cdFx0cmV0dXJuICQuZXhwci5maWx0ZXJzLnZpc2libGUoZWxlbWVudCkgJiYgISRlbEFuZFBhcmVudHMuZmlsdGVyKGZ1bmN0aW9uKCl7XHJcblx0XHRcdHJldHVybiAkLmNzcyh0aGlzLCAndmlzaWJpbGl0eScpID09PSAnaGlkZGVuJztcclxuXHRcdH0pLmxlbmd0aDtcclxuXHR9XHJcbn0iXX0=
